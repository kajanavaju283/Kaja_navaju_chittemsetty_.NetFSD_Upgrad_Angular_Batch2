<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Form Validation</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; }
        .field { margin-bottom: 15px; }
        input { width: 100%; padding: 8px; margin-top: 5px; }
        .error { color: red; font-size: 0.85em; display: block; margin-top: 5px; }
        .success { color: green; font-weight: bold; margin-top: 10px; }
        button { padding: 10px 15px; background: #007bff; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>

    <h2>Registration Form</h2>

    <div class="field">
        <label>Name:</label>
        <input type="text" id="name" onchange="validateName()" placeholder="Enter full name">
        <span id="nameError" class="error"></span>
    </div>

    <div class="field">
        <label>Email:</label>
        <input type="email" id="email" onchange="validateEmail()" placeholder="example@mail.com">
        <span id="emailError" class="error"></span>
    </div>

    <div class="field">
        <label>Age:</label>
        <input type="number" id="age" onchange="validateAge()" placeholder="Must be 18+">
        <span id="ageError" class="error"></span>
    </div>

    <button onclick="submitForm()">Register</button>
    <p id="finalStatus" class="success"></p>

    <script>
        // Validate Name: Cannot be empty
        function validateName() {
            const name = document.getElementById("name").value;
            const error = document.getElementById("nameError");
            if (name.trim() === "") {
                error.innerText = "Name cannot be empty";
                return false;
            }
            error.innerText = "";
            return true;
        }

        // Validate Email: Must contain "@"
        function validateEmail() {
            const email = document.getElementById("email").value;
            const error = document.getElementById("emailError");
            if (!email.includes("@")) {
                error.innerText = "Email must contain @";
                return false;
            }
            error.innerText = "";
            return true;
        }

        // Validate Age: Must be greater than 18
        function validateAge() {
            const age = document.getElementById("age").value;
            const error = document.getElementById("ageError");
            if (age === "" || parseInt(age) <= 18) {
                error.innerText = "Age must be greater than 18";
                return false;
            }
            error.innerText = "";
            return true;
        }

        // Final Submission
        function submitForm() {
            const isNameValid = validateName();
            const isEmailValid = validateEmail();
            const isAgeValid = validateAge();

            if (isNameValid && isEmailValid && isAgeValid) {
                // Collect data
                const userData = {
                    name: document.getElementById("name").value,
                    email: document.getElementById("email").value,
                    age: document.getElementById("age").value
                };

                // Store in sessionStorage (as per requirements)
                sessionStorage.setItem("validUser", JSON.stringify(userData));
                
                document.getElementById("finalStatus").innerText = "Registration Successful! Data saved in Session Storage.";
            } else {
                document.getElementById("finalStatus").innerText = "";
                alert("Please fix errors before submitting.");
            }
        }
    </script>

</body>
</html>